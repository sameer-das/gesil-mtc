<app-page-header title="Edit User" [backButton]="true"></app-page-header>


<div class="gesil-card mt-4">
    <p-tabs [value]="selectedTab">
        <p-tablist>
            <p-tab [routerLink]="[]" [queryParams]="{tab: 'basic-details'}" value="basic-details">User Basic Details</p-tab>
            <p-tab [routerLink]="[]" [queryParams]="{tab: 'documents'}" value="documents">User Documents</p-tab>
            <p-tab [routerLink]="[]" [queryParams]="{tab: 'reporting'}" value="reporting">User Reporting</p-tab>
            <!-- <p-tab [routerLink]="[]" [queryParams]="{tab: 'doc'}" value="3">Wards Assignment</p-tab> -->
        </p-tablist>
        <p-tabpanels>
            <p-tabpanel value="basic-details">
                <app-user-create [editMode]="true" [editUser]="userBasicDetail"></app-user-create>
            </p-tabpanel>
            <p-tabpanel value="documents">
                <div class="mt-4">
    
                    <div class="font-semibold text-xl">Aadhar and PAN Details</div>
    
                    <div class="flex flex-col md:flex-row gap-6 mt-4">
                        <div class="flex flex-wrap gap-2 w-full">
                            <label for="aadhar">Aadhar No</label>
                            <input pInputText id="aadhar" type="text" placeholder="0000 0000 0000" [formControl]="aadharNo"
                                fluid="true" />
                            <div class="flex justify-end w-full">
                                <p-button [disabled]="aadharNo.invalid" (click)="updateAadharPan('aadhar')">Update
                                    Aadhar</p-button>
                            </div>
    
                        </div>
                        <div class="flex flex-wrap gap-2 w-full">
                            <label for="pan">PAN</label>
                            <input pInputText id="pan" type="text" placeholder="ABCDE1234Z" [formControl]="pan"
                                fluid="true" />
                            <div class="flex justify-end w-full">
                                <p-button [disabled]="pan.invalid" (click)="updateAadharPan('pan')">Update PAN</p-button>
                            </div>
                        </div>
                    </div>
                    <p-divider />
                    <div class="font-semibold text-xl">Documents</div>
                    <div class="mt-4">
                        <p class="document-name text-md">User Photo</p>
    
                        <div class="flex justify-between mt-4">
                            <p-fileupload #up mode="basic" chooseLabel="Choose" chooseIcon="pi pi-upload"
                                maxFileSize="000000" customUpload="true" (uploadHandler)="onUpload($event, 'userPhoto', up)" />
    
                            <p-button label="Upload" (onClick)="up.upload()" severity="secondary" [disabled]="up.files.length === 0"  tooltipPosition="left" pTooltip="Upload User Photo"/>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="document-name text-md">Aadhar Front</p>
    
                        <div class="flex justify-between mt-4">
                            <p-fileupload #af mode="basic" chooseLabel="Choose" chooseIcon="pi pi-upload"
                                maxFileSize="3000000" customUpload="true" (uploadHandler)="onUpload($event, 'aadharFront', af)" />
    
                            <p-button label="Upload" (onClick)="af.upload()" severity="secondary" [disabled]="af.files.length === 0" tooltipPosition="left" pTooltip="Upload Aadhar Front-side" />
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="document-name text-md">Aadhar Back</p>
    
                        <div class="flex justify-between mt-4">
                            <p-fileupload #ab mode="basic" chooseLabel="Choose" chooseIcon="pi pi-upload"
                                maxFileSize="3000000" customUpload="true" (uploadHandler)="onUpload($event, 'aadharBack', ab)" />
     
                            <p-button label="Upload" (onClick)="ab.upload()" severity="secondary" [disabled]="ab.files.length === 0"  tooltipPosition="left" pTooltip="Upload Aadhar Back-side" />
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="document-name text-md">PAN</p>
    
                        <div class="flex justify-between mt-4">
                            <p-fileupload #pn mode="basic" chooseLabel="Choose" chooseIcon="pi pi-upload"
                                maxFileSize="3000000" customUpload="true" (uploadHandler)="onUpload($event, 'pan', pn)" />
    
                            <p-button label="Upload" (onClick)="pn.upload()" severity="secondary" [disabled]="pn.files.length === 0"  tooltipPosition="left" pTooltip="Upload PAN"/>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="document-name text-md">Highest Education Certificate</p>
    
                        <div class="flex justify-between mt-4">
                            <p-fileupload #edu mode="basic" chooseLabel="Choose" chooseIcon="pi pi-upload"
                                maxFileSize="3000000" customUpload="true" (uploadHandler)="onUpload($event, 'highestQualificationDoc',edu)" />
    
                            <p-button label="Upload" (onClick)="edu.upload()" severity="secondary"  [disabled]="edu.files.length === 0"  tooltipPosition="left" pTooltip="Upload Education Certificate"/>
                        </div>
                    </div>
                </div>
    
    
    
            </p-tabpanel>
            <p-tabpanel value="reporting">
                <div class="flex flex-col mt-4 gap-6">
                    <div class="font-semibold text-xl">User Reporting Details</div>
                    <div class="flex justify-center">
                        <div class="flex flex-col w-full md:w-1/2 mt-6 gap-2">
                            <label for="gender">Reports to</label>
                            <p-select id="gender" [options]="parentOptions" [(ngModel)]="selectedParent"
                                optionLabel="optionLabel" placeholder="Select Whom to Report" class="w-full"></p-select>
                        </div>
                    </div>
    
                    <div class="flex gap-2 justify-end">
                        <p-button raised="true" type="button" [disabled]="!selectedParent"
                            (click)="updateUserParentMapping()">Update User Reporting</p-button>
                    </div>
                </div>
            </p-tabpanel>
            <!-- <p-tabpanel value="3">
                <div class="mt-4">
                    <div class="font-semibold text-xl">Wards</div>
                </div>
            </p-tabpanel> -->
        </p-tabpanels>
    </p-tabs>
</div>